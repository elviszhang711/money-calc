<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è³‡é‡‘ç¸½é¡è¨ˆç®—æ©Ÿ (å«éŠ€è¡Œç¾é‡‘)</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background-color: #f0f2f5; padding: 20px; }
        .container { max-width: 650px; margin: 0 auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #1a1a1a; margin-bottom: 20px; }
        h3 { color: #0056b3; border-bottom: 2px solid #e9ecef; padding-bottom: 8px; margin-top: 25px; font-size: 1.2em;}
        
        .rate-group { background-color: #fff3cd; padding: 15px; border-radius: 8px; border: 1px solid #ffeeba; margin-bottom: 20px; display: flex; align-items: center; justify-content: space-between;}
        .rate-group label { color: #856404; font-weight: bold; }
        .rate-group input { border-color: #ffeeba; background: #fff; font-weight: bold; color: #856404; }

        .input-group { margin-bottom: 12px; display: flex; align-items: center; flex-wrap: wrap; }
        .input-group label { flex: 1; min-width: 140px; font-weight: 500; color: #555; }
        .input-wrapper { position: relative; display: flex; align-items: center; }
        
        input[type="number"] { padding: 10px; border: 1px solid #ced4da; border-radius: 6px; width: 140px; text-align: right; font-size: 16px; transition: border-color 0.2s; }
        input[type="number"]:focus { border-color: #80bdff; outline: none; }
        
        /* ç‰¹åˆ¥æ¨™ç¤ºç¾é‡‘æ¬„ä½ */
        .cash-input { border-left: 5px solid #28a745 !important; }

        /* ç¾é‡‘è¼¸å…¥æ¡†æ¨£å¼ */
        .usd-input { border-color: #b8daff !important; background-color: #f6fafe; }
        .usd-hint { font-size: 13px; color: #6c757d; margin-left: 10px; min-width: 120px; }

        .result-box { background-color: #d4edda; color: #155724; padding: 20px; text-align: center; margin-top: 25px; border-radius: 8px; border: 1px solid #c3e6cb; }
        .result-title { font-size: 16px; margin-bottom: 5px; opacity: 0.8; }
        .result-text { font-size: 32px; font-weight: bold; }
        
        button { width: 100%; padding: 15px; background-color: #28a745; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 25px; transition: background-color 0.2s; }
        button:hover { background-color: #218838; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ’° è³‡é‡‘ç¸½é¡è¨ˆç®—æ©Ÿ</h2>

    <div class="rate-group">
        <label>ğŸ‡ºğŸ‡¸ ç¾é‡‘åŒ¯ç‡ (USD to TWD)</label>
        <input type="number" id="exchangeRate" value="32.5" step="0.01" oninput="calculateTotal()">
    </div>

    <div class="input-group">
        <label>å…¶ä»–/æ‰‹é‚Šç¾é‡‘</label>
        <input type="number" class="calc-twd cash-input" placeholder="0" oninput="calculateTotal()">
    </div>

    <h3>ğŸ¦ éŠ€è¡Œ1ï¼šæ°¸è±éŠ€è¡Œ</h3>
    <div class="input-group"><label>ğŸ’µ å¸³æˆ¶ç¾é‡‘é¤˜é¡</label><input type="number" class="calc-twd cash-input" placeholder="0" oninput="calculateTotal()"></div>
    <div class="input-group"><label>å°è‚¡åœ¨é€” (T+1)</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>
    <div class="input-group"><label>å°è‚¡åœ¨é€” (T+2)</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>
    
    <div class="input-group">
        <label>ğŸ‡ºğŸ‡¸ ç¾è‚¡åœ¨é€” (T+1)</label>
        <div class="input-wrapper">
            <input type="number" class="calc-usd" placeholder="è¼¸å…¥ç¾é‡‘" oninput="updateUsdHint(this); calculateTotal()">
            <span class="usd-hint">â‰’ NT$ 0</span>
        </div>
    </div>
    <div class="input-group">
        <label>ğŸ‡ºğŸ‡¸ ç¾è‚¡åœ¨é€” (T+2)</label>
        <div class="input-wrapper">
            <input type="number" class="calc-usd" placeholder="è¼¸å…¥ç¾é‡‘" oninput="updateUsdHint(this); calculateTotal()">
            <span class="usd-hint">â‰’ NT$ 0</span>
        </div>
    </div>
    
    <div class="input-group"><label>è³ªæŠ¼ 1</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>
    <div class="input-group"><label>è³ªæŠ¼ 2</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>

    <h3>ğŸ¦ éŠ€è¡Œ2ï¼šç¾¤ç›ŠéŠ€è¡Œ</h3>
    <div class="input-group"><label>ğŸ’µ å¸³æˆ¶ç¾é‡‘é¤˜é¡</label><input type="number" class="calc-twd cash-input" placeholder="0" oninput="calculateTotal()"></div>
    <div class="input-group"><label>å°è‚¡åœ¨é€” (T+1)</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>
    <div class="input-group"><label>å°è‚¡åœ¨é€” (T+2)</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>
    <div class="input-group"><label>è³ªæŠ¼ 1</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>
    <div class="input-group"><label>è³ªæŠ¼ 2</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>

    <h3>ğŸ¦ éŠ€è¡Œ3ï¼šåœ‹æ³°éŠ€è¡Œ</h3>
    <div class="input-group"><label>ğŸ’µ å¸³æˆ¶ç¾é‡‘é¤˜é¡</label><input type="number" class="calc-twd cash-input" placeholder="0" oninput="calculateTotal()"></div>
    <div class="input-group"><label>å°è‚¡åœ¨é€” (T+1)</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>
    <div class="input-group"><label>å°è‚¡åœ¨é€” (T+2)</label><input type="number" class="calc-twd" placeholder="0" oninput="calculateTotal()"></div>
    
    <div class="input-group">
        <label>ğŸ‡ºğŸ‡¸ ç¾è‚¡åœ¨é€” (T+1)</label>
        <div class="input-wrapper">
            <input type="number" class="calc-usd" placeholder="è¼¸å…¥ç¾é‡‘" oninput="updateUsdHint(this); calculateTotal()">
            <span class="usd-hint">â‰’ NT$ 0</span>
        </div>
    </div>
    <div class="input-group">
        <label>ğŸ‡ºğŸ‡¸ ç¾è‚¡åœ¨é€” (T+2)</label>
        <div class="input-wrapper">
            <input type="number" class="calc-usd" placeholder="è¼¸å…¥ç¾é‡‘" oninput="updateUsdHint(this); calculateTotal()">
            <span class="usd-hint">â‰’ NT$ 0</span>
        </div>
    </div>

    <button onclick="calculateTotal()">ğŸ”„ é‡æ–°è¨ˆç®—ç¸½é¡</button>

    <div class="result-box">
        <div class="result-title">ç¸½è¨ˆå¯ç”¨ç¾é‡‘ (æ–°å°å¹£)</div>
        <div class="result-text" id="totalAmount">NT$ 0</div>
    </div>
</div>

<script>
    function getRate() {
        return parseFloat(document.getElementById('exchangeRate').value) || 32.5;
    }

    function updateUsdHint(inputElement) {
        const rate = getRate();
        const usdVal = parseFloat(inputElement.value) || 0;
        const twdVal = Math.round(usdVal * rate);
        // æ‰¾åˆ°æ—é‚Šçš„æç¤ºæ–‡å­— span
        const hintSpan = inputElement.parentElement.querySelector('.usd-hint');
        if(hintSpan) {
            hintSpan.innerText = 'â‰’ NT$ ' + twdVal.toLocaleString();
        }
    }

    function calculateTotal() {
        const rate = getRate();
        let total = 0;

        // 1. åŠ ç¸½å°å¹£æ¬„ä½ (åŒ…å«æ–°çš„ç¾é‡‘æ¬„ä½)
        const twdInputs = document.querySelectorAll('.calc-twd');
        twdInputs.forEach(input => {
            total += parseFloat(input.value) || 0;
        });

        // 2. åŠ ç¸½ç¾é‡‘æ¬„ä½ä¸¦æ›ç®—
        const usdInputs = document.querySelectorAll('.calc-usd');
        usdInputs.forEach(input => {
            const usdVal = parseFloat(input.value) || 0;
            const twdVal = usdVal * rate;
            total += twdVal;
            
            updateUsdHint(input);
        });

        // é¡¯ç¤ºçµæœ
        document.getElementById('totalAmount').innerText = 'NT$ ' + Math.round(total).toLocaleString();
    }
</script>

</body>
</html>
